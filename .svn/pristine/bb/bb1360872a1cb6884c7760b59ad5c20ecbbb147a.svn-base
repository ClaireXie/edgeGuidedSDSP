%display edges for 
% 1. original
% 2. afer shock filtering
% 3. after distance transform

clc;clear;close all;

load result/patchData_4_high3;

scale=4;
psize=sqrt(size(lowdata,2));
psize_high=psize;
half=(psize+1)/2;

inputFile='cones';
original=imread(['inputs/', inputFile, '_clean.png']);
sz = size(original);
sz = sz - mod(sz, scale);
original = original(1:sz(1), 1:sz(2));

input=imresize(original,1/scale,'nearest');
input=double(input);
low=imresize(input,scale,'nearest');
edgesl = edge(low,'canny',0.1);
low0=imresize(input,scale,'bicubic');

para.dt=0.1;
para.h=1;
para.iter=20; 
para.lam=0.00;
para.lam_tld=1;
para.a=0.4;
para.theta=pi/1000;
para.smooth=0;

low0=real(shock(low,para.iter,para.dt,para.h,'cmp',[para.lam,para.lam_tld,para.a])); 
edgesl0 = edge(low0,'canny',0.1);

%display edge after shock filtering
figure;imshow(edgesl0);
%display the original edges
figure;imshow(edgesl);
%display edges after distance transform
figure;imshow(uint8(bwdist(edgesl0)));

imwrite(uint8(edgesl*255),'edgelow.png');
imwrite(uint8(edgesl0*255),'edgelow0.png');
imwrite(uint8(bwdist(edgesl0)),'distTrans.png');

